% ----------------------------------------------------------------------------
% the XSIM package - templates module
% 
%   eXercise Sheets IMproved
% 
% ----------------------------------------------------------------------------
% Clemens Niederberger
% Web:    https://github.com/cgnieder/xsim
% E-Mail: contact@mychemistry.eu
% ----------------------------------------------------------------------------
% Copyright 2017 Clemens Niederberger
% 
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
% 
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Clemens Niederberger.
% ----------------------------------------------------------------------------
% If you have any ideas, questions, suggestions or bugs to report, please
% feel free to contact me.
% ----------------------------------------------------------------------------
\XSIMmodule{templates}{properties of exercises}

\xsim_load_modules:n {base,properties,goals}

% verse-type templates
\prop_new:N \l__xsim_begin_template_prop
\prop_new:N \l__xsim_end_template_prop
\prop_new:N \l__xsim_heading_template_prop

% #1: template name
% #2: begin code
% #3: end code
\cs_new_protected:Npn \xsim_declare_template:nnn #1#2#3
  {
    \prop_put:Nnn \l__xsim_begin_template_prop {#1} {#2}
    \prop_put:Nnn \l__xsim_end_template_prop {#1} {#3}
  }

% #1: template name
% #2:  code
\cs_new_protected:Npn \xsim_declare_heading_template:nn #1#2
  { \prop_put:Nnn \l__xsim_heading_template_prop {#1} {#2} }

\cs_new_protected:Npn \xsim_setup_template_definitions:
  {
    \cs_set_eq:NN \XSIMexpandcode \use:x
    \cs_set:Npn   \XSIMmixedcase ##1 { \tl_mixed_case:f {##1} }
  }

% #1: begin|end|heading
% #2: template name
\cs_new_protected:Npn \xsim_use_template:nn #1#2
  {
    \xsim_setup_template_definitions:
    \prop_item:cn {l__xsim_#1_template_prop} {#2}
  }
\cs_generate_variant:Nn \xsim_use_template:nn {nx}

% ----------------------------------------------------------------------------  
\tex_endinput:D
