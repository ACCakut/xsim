% ----------------------------------------------------------------------------
% the XSIM package - interface module
% 
%   eXercise Sheets IMproved
% 
% ----------------------------------------------------------------------------
% Clemens Niederberger
% Web:    https://github.com/cgnieder/xsim
% E-Mail: contact@mychemistry.eu
% ----------------------------------------------------------------------------
% Copyright 2017 Clemens Niederberger
% 
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
% 
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Clemens Niederberger.
% ----------------------------------------------------------------------------
% If you have any ideas, questions, suggestions or bugs to report, please
% feel free to contact me.
% ----------------------------------------------------------------------------
\XSIMmodule{interface}{user interface}

\NewDocumentCommand \DeclareExerciseTemplate {m+m+m}
  { \xsim_declare_template:nnn {#1} {#2} {#3} }

\NewDocumentCommand \DeclareExerciseHeadingTemplate {m+m}
  { \xsim_declare_heading_template:nn {#1} {#2} }

\NewDocumentCommand \DeclareExerciseType {mm}
  { \xsim_declare_exercise_type:nn {#1} {#2} }

% ----------------------------------------------------------------------------

\DeclareExpandableDocumentCommand \IfInsideSolutionTF {mm}
  { \xsim_if_inside_solution:TF {#1} {#2} }

% ----------------------------------------------------------------------------

\NewDocumentCommand \DeclareExerciseProperty {sm}
  {
    \IfBooleanTF {#1}
      { \xsim_declare_property:nn { \c_true_bool } {#2} }
      { \xsim_declare_property:nn { \c_false_bool } {#2} }
  }

\DeclareExpandableDocumentCommand \IfExercisePropertyTF {mmm}
  { \xsim_if_property_exist:nTF {#1} {#2} {#3} }

\NewDocumentCommand \IfExercisePropertySetTF {mmm}
  { \xsim_if_property_set:xxnTF {\ExerciseType} {\ExerciseID} {#1} {#2} {#3} }

\DeclareExpandableDocumentCommand \GetExerciseProperty {m}
  { \xsim_get_property:oon {\ExerciseType} {\ExerciseID} {#1} }

\NewDocumentCommand \SaveExerciseProperty {mm}
  { \xsim_save_property:xxnN {\ExerciseType} {\ExerciseID} {#1} #2 }

\NewDocumentCommand \GlobalSaveExerciseProperty {mmmm}
  { \xsim_gsave_property:xxnN {\ExerciseType} {\ExerciseID} {#1} #2 }

% ----------------------------------------------------------------------------
  
\DeclareExpandableDocumentCommand \GetExerciseParameter {m}
  { \xsim_get_parameter:on {\ExerciseType} {#1} }
  
% ----------------------------------------------------------------------------

\NewDocumentCommand \DeclareExerciseGoal {m}
  { \xsim_declare_exercise_goal:n {#1} }

\NewDocumentCommand \IfExerciseGoalTF {mmmm}
  {
    \xsim_if_goal_value:xxnnTF
      {\ExerciseType} {\ExerciseID} {#1}
      {#2}
      {#3} {#4}
  }

\NewDocumentCommand \ExerciseGoalName {mmm}
  {
    \xsim_if_goal_value:xxnnTF
      {\ExerciseType} {\ExerciseID} {#1}
      {=1}
      {#2} {#3}
  }

\NewDocumentCommand \TotalExerciseTypeGoal {mmmm}
  { \xsim_print_goal_sum:nnnn {#1} {#2} {#3} {#4} }

\NewDocumentCommand \TotalExerciseGoal {mmm}
  { \xsim_print_total_goal_sum:nnn {#1} {#2} {#3} }

% ----------------------------------------------------------------------------

\DeclareExpandableDocumentCommand \XSIMtranslate {m}
  { \xsim_translate:n {#1} }
  
\NewDocumentCommand \DeclareExerciseTranslations {mm}
  { \xsim_declare_translations:nn {#1} {#2} }
\@onlypreamble \DeclareExerciseTranslations
  
\NewDocumentCommand \DeclareExerciseTranslation {mmm}
  { \xsim_declare_translation:nnn {#1} {#2} {#3} }
\@onlypreamble \DeclareExerciseTranslation

\NewDocumentCommand \ForAllExerciseTranslationsDo {+m}
  { \xsim_for_all_translations_do:n {#1} }

% ----------------------------------------------------------------------------

\NewDocumentCommand \blank {som}
  {
    \group_begin:
      \IfNoValueF {#2} { \keys_set:nn {xsim/blank} {#2} }
      \mode_if_vertical:TF
        {
          \IfBooleanF {#1} { \noindent }
          \xsim_blank:n {#3}
          \IfBooleanF {#1}
            {
              \bool_if:NT \l__xsim_blank_linespread_bool
                { \linespread { \l__xsim_blank_linespread_tl } \selectfont }
              \par
            }
        }
        { \xsim_blank:n {#3} }
    \group_end:
  }
  
% ----------------------------------------------------------------------------
% this is temporary!
\NewDocumentCommand \printsolutionstype {m}
  { \xsim_print_type_solutions:n {#1} }

\NewDocumentCommand \printsolutions {}
  { \xsim_print_all_solutions: }

% ----------------------------------------------------------------------------

\NewDocumentCommand \xsimsetup {m}
  { \keys_set:nn {xsim} {#1} }

% ----------------------------------------------------------------------------
\tex_endinput:D
